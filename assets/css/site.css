:root{
  --paper:#f7f3e9; --paper-edge:#ece5d2; --ink:#1f2328; --muted:#6f6a60; --accent:#7c5cff; --gilt:#b08400;
  --shadow:0 30px 80px rgba(0,0,0,.14), 0 6px 18px rgba(0,0,0,.08);
  --inner-shadow: inset 30px 0 40px rgba(0,0,0,.05), inset -30px 0 40px rgba(0,0,0,.05);
  --radius:18px; --font-body: ui-serif, Georgia, "Times New Roman", serif; --font-ui: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  --base:18px; --line:1.65; --wood:#9b6b34; --wood-dark:#6d4823; --wall:#dbd7cd;
}
[data-theme="sepia"]{ --paper:#f2eddc; --paper-edge:#e6ddc3; --ink:#2d2418; --muted:#7d6f59; --accent:#6d5dfc; --wall:#d5cfbc; }
[data-theme="night"]{ --paper:#0d1014; --paper-edge:#0b0e12; --ink:#e5e7eb; --muted:#9aa4b2; --accent:#60a5fa; --gilt:#eab308; --inner-shadow: inset 30px 0 40px rgba(255,255,255,.03), inset -30px 0 40px rgba(255,255,255,.03); --wood:#3f2b15; --wood-dark:#281a0d; --wall:#0b0e12; }

*{box-sizing:border-box}
html,body{height:100%}
body{ margin:0; background:var(--wall); font-family: var(--font-body); color:var(--ink); font-size:var(--base); }

/* Top bar */
.bar{ position:sticky; top:0; z-index:10; display:flex; gap:10px; align-items:center; justify-content:center; padding:10px 12px; backdrop-filter:saturate(140%) blur(6px); background:rgba(250,250,248,.45); border-bottom:1px solid rgba(0,0,0,.06); font-family:var(--font-ui); }
.bar .btn{ border:1px solid rgba(0,0,0,.12); background:#fff; padding:8px 12px; border-radius:12px; cursor:pointer; font-weight:600; text-decoration:none; color:inherit; }
[data-theme="night"] .bar{ background:rgba(8,10,12,.45); border-color:rgba(255,255,255,.08); }
[data-theme="night"] .bar .btn{ background:#0f1319; color:var(--ink); border-color:rgba(255,255,255,.12); }
.bar .left{ position:absolute; left:12px; display:flex; gap:8px; }
.bar .right{ position:absolute; right:12px; display:flex; align-items:center; }
.hint{ opacity:.7; }
.settings-group{ position:relative; }
.settings{ position: absolute; z-index: 20; min-width: 260px; padding:12px; border:1px solid rgba(0,0,0,.12); border-radius:12px; background:#fff; box-shadow:0 16px 40px rgba(0,0,0,.2); }
.settings__section{ margin:6px 0 10px; }
.settings__title{ font-family:var(--font-ui); font-weight:800; font-size:12px; letter-spacing:.08em; text-transform:uppercase; color:var(--muted); margin-bottom:6px; }
.settings label{ margin-right:10px; font-family:var(--font-ui); font-size:14px; }
.settings input[type=range]{ width:160px; vertical-align:middle; }
.settings__value{ display:inline-block; width:42px; text-align:right; font-family:var(--font-ui); color:var(--muted); }
.settings__actions{ display:flex; gap:8px; justify-content:flex-end; }
.profile{ display:flex; align-items:center; gap:8px; text-decoration:none; color:inherit; font-family:var(--font-ui); }
.profile .avatar{ width:28px; height:28px; border-radius:999px; background:linear-gradient(135deg,#e5e7eb,#cbd5e1); overflow:hidden; box-shadow:0 2px 6px rgba(0,0,0,.15); display:flex; align-items:center; justify-content:center; }
.profile .avatar img{ width:100%; height:100%; object-fit:cover; display:block; }
.profile .avatar .initials{ font-size:12px; font-weight:800; color:#374151; line-height:1; display:flex; align-items:center; justify-content:center; }
.profile .name{ font-weight:600; font-size:14px; }

/* Shelf view */
.library{ padding:24px 16px 90px; max-width:1200px; margin:0 auto; }
.shelf-row{ position:relative; margin:36px 0 64px; padding:28px 12px 22px; border-radius:14px; background:
  linear-gradient(180deg, rgba(255,255,255,.08), rgba(0,0,0,.06)),
  linear-gradient(180deg, var(--wood) 0%, var(--wood-dark) 90%);
  box-shadow: inset 0 4px 0 rgba(255,255,255,.15), inset 0 -4px 0 rgba(0,0,0,.25), 0 20px 40px rgba(0,0,0,.18);
}
.shelf-title{ font-family:var(--font-ui); color:#fff; opacity:.9; font-weight:800; letter-spacing:.12em; text-transform:uppercase; font-size:12px; position:absolute; top:4px; left:14px; }
.tiles{ display:grid; grid-template-columns: repeat(5, minmax(180px,1fr)); gap:22px; }

/* Diary cover card */
.cover{ position:relative; display:flex; flex-direction:column; justify-content:flex-end; padding:18px 16px; height:200px; border-radius:12px; text-decoration:none; color:#111;
  --cover-start: #2b3a67; /* defaults */
  --cover-end: #0f172a;
  --strap-start: #b08400;
  --strap-end: #f7c948;
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.06)),
    linear-gradient(135deg, var(--cover-start), var(--cover-end));
  box-shadow: 0 12px 26px rgba(0,0,0,.22), inset 0 0 0 1px rgba(255,255,255,.08);
}
.cover:hover{ transform: translateY(-2px); box-shadow: 0 18px 34px rgba(0,0,0,.26); }
.cover__strap{ position:absolute; left:0; top:0; bottom:0; width:10px; background: linear-gradient(180deg, var(--strap-start), var(--strap-end)); border-top-left-radius:12px; border-bottom-left-radius:12px; box-shadow: inset -2px 0 0 rgba(0,0,0,.25); }
.cover__brand{ position:absolute; top:12px; right:14px; font-family: var(--font-ui); font-weight:700; letter-spacing:.06em; text-transform:uppercase; font-size:11px; color:#e9e9e9; opacity:.9; }
.cover__title{ font-family: var(--font-ui); font-weight:800; font-size:20px; color:#ffffff; text-shadow:0 2px 8px rgba(0,0,0,.35); }
.cover__blurb{ margin-top:6px; font-family: var(--font-ui); font-size:13px; color:#dbeafe; opacity:.95; line-height:1.35; }
.cover__meta{ margin-top:6px; font-family: var(--font-ui); font-size:12px; color:#d1d5db; opacity:.9; }

/* Cover icon */
.cover__icon{ position:absolute; top:10px; left:16px; font-size:20px; filter: drop-shadow(0 2px 4px rgba(0,0,0,.35)); }
.cover__icon::before{ content:"üìò"; }
.cover[data-id="technology"] .cover__icon::before{ content:"üíª"; }
.cover[data-id="personal-growth"] .cover__icon::before{ content:"üå±"; }
.cover[data-id="health"] .cover__icon::before{ content:"‚ù§Ô∏è"; }
.cover[data-id="finance"] .cover__icon::before{ content:"üí∞"; }
.cover[data-id="career"] .cover__icon::before{ content:"üíº"; }
.cover[data-id="books"] .cover__icon::before{ content:"üìö"; }
.cover[data-id="travel"] .cover__icon::before{ content:"‚úàÔ∏è"; }
.cover[data-id="food"] .cover__icon::before{ content:"üçΩÔ∏è"; }
.cover[data-id="science"] .cover__icon::before{ content:"üî¨"; }
.cover[data-id="reflections"] .cover__icon::before{ content:"üìù"; }

/* Toggle visibility via data-style on main.library */
.library[data-style="cover"] .note{ display:none; }
.library[data-style="notes"] .cover{ display:none; }

.note{ position:relative; padding:16px 14px 18px; border-radius:10px; background: #fff8b8; color:#3a3727; box-shadow: 0 10px 20px rgba(0,0,0,.18); transform: rotate(var(--tilt)); cursor:pointer; transition: transform .2s ease, box-shadow .2s ease; text-decoration:none; }
.note:hover{ transform: rotate(var(--tilt)) translateY(-2px); box-shadow: 0 16px 26px rgba(0,0,0,.22); }
.note--mint{ background:#e7fbe9; color:#223024; }
.note--sky{ background:#e7f1ff; color:#1f2a3a; }
.note--rose{ background:#ffe8ef; color:#3a1f2a; }
.note h3{ margin:0 0 6px; font-size:18px; font-family:var(--font-ui); }
.note ul{ margin:8px 0 0 16px; padding:0; font-size:14px; line-height:1.45; }
.pin{ position:absolute; left:50%; top:-8px; transform:translateX(-50%); width:18px; height:18px; border-radius:999px; background:radial-gradient(circle at 35% 35%, #fff, #bbb); box-shadow: 0 4px 8px rgba(0,0,0,.3); }
.dogear{ position:absolute; right:0; top:0; width:0; height:0; border-left:12px solid transparent; border-bottom:12px solid rgba(0,0,0,.12); }

/* Book view */
.wrap{ padding:26px 16px 100px; }
.book{ width:min(1140px, 96vw); margin:18px auto 0; perspective: 2000px; }
.spread{ display:grid; grid-template-columns: 1fr 1fr; border-radius: var(--radius); box-shadow: var(--shadow); overflow:hidden; position:relative; transform-style:preserve-3d; }
.hinge{ position:absolute; left:50%; top:0; bottom:0; width:2px; background:linear-gradient(180deg, transparent, rgba(0,0,0,.08), transparent); z-index:2; }
.page{ background: var(--paper); padding:44px 40px 56px; min-height: 66vh; position:relative; box-shadow: var(--inner-shadow); }
.page.left{ border-right: 1px solid var(--paper-edge); }
.page.right{ border-left: 1px solid var(--paper-edge); }
.page:before{ content:""; position:absolute; inset:0; background: repeating-linear-gradient(0deg, rgba(0,0,0,.02), rgba(0,0,0,.02) 1px, transparent 1px, transparent 28px); pointer-events:none; border-radius: var(--radius); }
.folio{ position:absolute; bottom:18px; left:0; right:0; text-align:center; font-variant-numeric: oldstyle-nums; color:var(--muted); font-size:.9em; letter-spacing:.08em; }

h1,h2,h3{ margin:0 0 10px; line-height:1.2; }
h1{ font-size: clamp(26px, 4.2vw, 36px);} 
.chapter{ text-transform:uppercase; letter-spacing:.18em; font-family:var(--font-ui); color:var(--muted); font-weight:700; font-size:.78rem; }
.subtitle{ color:var(--muted); font-style:italic; margin-bottom:16px; }
p{ margin:0 0 14px; line-height:var(--line); hyphens:auto; text-wrap: pretty; }
.dropcap p:first-of-type::first-letter{ float:left; font-size:3.6em; line-height:.85; margin:.06em .18em 0 0; font-weight:800; color:var(--accent); }
ul{ margin:8px 0 14px 20px; }

.ribbon{ position:absolute; right:28px; top:0; width:14px; height:60px; background: linear-gradient(180deg, var(--gilt), #fddf6d); clip-path: polygon(0 0,100% 0,100% 75%,50% 100%,0 75%); box-shadow:0 6px 10px rgba(0,0,0,.18); }
.controls{ position:absolute; bottom:16px; right:22px; display:flex; gap:8px; font-family:var(--font-ui); }
.pill{ border:1px solid rgba(0,0,0,.15); background:rgba(255,255,255,.6); padding:6px 10px; border-radius:999px; cursor:pointer; }
[data-theme="night"] .pill{ background:rgba(0,0,0,.35); border-color:rgba(255,255,255,.18); color:var(--ink); }

.tabs{ display:flex; gap:8px; flex-wrap:wrap; margin:6px 0 16px; font-family:var(--font-ui); }
.tab{ border:1px solid rgba(0,0,0,.12); padding:6px 10px; border-radius:10px; cursor:pointer; background:rgba(255,255,255,.55); }
.tab[data-active="true"]{ border-color:var(--accent); box-shadow:0 0 0 2px #00000010 inset; }
[data-theme="night"] .tab{ background:rgba(0,0,0,.25); color:var(--ink); }

/* Post layout */
.post-read{ max-width: 840px; margin: 24px auto 80px; padding: 0 18px; }
.post-head h1{ margin: 10px 0 0; }
.post-head .meta{ color: var(--muted); font-family: var(--font-ui); margin: 6px 0 10px; }
.post-body{ line-height: var(--line); }
.post-body pre{ overflow:auto; padding: 12px; background: #11161d; color: #e5e7eb; border-radius: 10px; }
.post-body img{ max-width: 100%; height: auto; border-radius: 10px; box-shadow: var(--shadow); }
.post-read .back{ margin-top: 28px; }
.post-read .back a{ text-decoration:none; color:inherit; display:inline-flex; align-items:center; gap:8px; border:1px solid rgba(0,0,0,.15); background:rgba(255,255,255,.6); padding:8px 12px; border-radius:12px; font-family:var(--font-ui); font-weight:600; }
.post-read .back a:hover{ transform: translateY(-1px); box-shadow: 0 6px 14px rgba(0,0,0,.12); }

/* Signature */
.signature{ display:flex; gap:12px; align-items:center; margin:24px 0 12px; }
.sig__avatar{ width:40px; height:40px; border-radius:999px; background:linear-gradient(135deg,#e5e7eb,#cbd5e1); overflow:hidden; box-shadow:0 2px 8px rgba(0,0,0,.15); }
.sig__avatar img{ width:100%; height:100%; object-fit:cover; display:block; }
.sig__text{ font-family:var(--font-ui); }
.sig__name{ font-weight:800; }
.sig__bio{ color:var(--muted); max-width:60ch; }
.sig__link{ display:inline-block; margin-top:6px; font-weight:600; text-decoration:none; }

/* Chips */
.chip{ display:inline-block; padding:2px 8px; border:1px solid rgba(0,0,0,.1); border-radius:999px; text-decoration:none; font-family:var(--font-ui); font-size:12px; }

/* About page links */
.links{ display:flex; gap:10px; flex-wrap:wrap; margin:14px 0 28px; }
.btn-link{ display:inline-block; border:1px solid rgba(0,0,0,.12); background:#fff; padding:8px 12px; border-radius:12px; text-decoration:none; color:inherit; font-family:var(--font-ui); font-weight:600; }
.btn-link:hover{ transform: translateY(-1px); box-shadow:0 6px 14px rgba(0,0,0,.12); }

/* About: profile card */
.profile-card{ display:flex; gap:16px; align-items:flex-start; border:1px solid rgba(0,0,0,.08); background:rgba(255,255,255,.6); padding:16px; border-radius:14px; box-shadow:0 8px 24px rgba(0,0,0,.08); margin-top:16px; }
.pc-avatar{ width:72px; height:72px; border-radius:999px; background:linear-gradient(135deg,#e5e7eb,#cbd5e1); overflow:hidden; box-shadow:0 2px 8px rgba(0,0,0,.15); flex:0 0 72px; display:flex; align-items:center; justify-content:center; }
.pc-avatar img{ width:100%; height:100%; object-fit:cover; display:block; }
.pc-avatar .initials{ font-size:22px; font-weight:800; color:#374151; line-height:1; display:flex; align-items:center; justify-content:center; }
.pc-body{ flex:1 1 auto; }
.pc-body, .pc-body *{ color: var(--ink); }
.pc-name{ margin:0; font-family:var(--font-ui); }
.pc-bio{ color:var(--muted); margin:6px 0 8px; }
.pc-links{ list-style:none; padding:0; margin:0; display:flex; gap:12px; flex-wrap:wrap; }
.pc-links a{ text-decoration:none; font-weight:600; border-bottom:1px dashed rgba(0,0,0,.2); }
@media (max-width: 640px){ .profile-card{ flex-direction:column; align-items:center; text-align:center; } }

/* Responsive */
@media (max-width: 980px){
  .tiles{ grid-template-columns: repeat(2, minmax(150px,1fr)); }
  .spread{ grid-template-columns: 1fr; }
  .page.left{ border-right:none; border-bottom:1px solid var(--paper-edge); }
  .hinge{ display:none; }
  .wrap{ padding-bottom:110px; }
}

@media (max-width: 600px){
  .tiles{ grid-template-columns: 1fr; }
}

/* Small-screen top bar fixes */
@media (max-width: 720px){
  .bar{ justify-content:space-between; gap:8px; padding:8px 10px; flex-wrap:wrap; }
  .bar .left, .bar .right{ position:static; }
  .bar .btn{ padding:6px 10px; }
  .hint{ display:none; }
  .profile .name{ display:none; }
}

/* Per-category color themes for covers */
.cover[data-id="technology"]{ --cover-start:#1e3a8a; --cover-end:#0f172a; --strap-start:#06b6d4; --strap-end:#67e8f9; }
.cover[data-id="personal-growth"]{ --cover-start:#1a3d2f; --cover-end:#0f2d23; --strap-start:#84cc16; --strap-end:#facc15; }
.cover[data-id="health"]{ --cover-start:#0b3b3c; --cover-end:#072b2c; --strap-start:#14b8a6; --strap-end:#99f6e4; }
.cover[data-id="finance"]{ --cover-start:#064e3b; --cover-end:#022c22; --strap-start:#22c55e; --strap-end:#bbf7d0; }
.cover[data-id="career"]{ --cover-start:#3730a3; --cover-end:#111827; --strap-start:#6366f1; --strap-end:#a5b4fc; }
.cover[data-id="books"]{ --cover-start:#5b21b6; --cover-end:#1f1147; --strap-start:#a78bfa; --strap-end:#ddd6fe; }
.cover[data-id="travel"]{ --cover-start:#9a3412; --cover-end:#3b0b0b; --strap-start:#f59e0b; --strap-end:#fde68a; }
.cover[data-id="food"]{ --cover-start:#7f1d1d; --cover-end:#3f0a0a; --strap-start:#ef4444; --strap-end:#fecaca; }
.cover[data-id="science"]{ --cover-start:#0f172a; --cover-end:#020617; --strap-start:#38bdf8; --strap-end:#bae6fd; }
.cover[data-id="reflections"]{ --cover-start:#7c2d4a; --cover-end:#3b1423; --strap-start:#f43f5e; --strap-end:#fecdd3; }
