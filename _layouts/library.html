---
layout: default
---

{% include topbar.html %}

<main class="library" aria-label="Bookshelves" data-style="{{ site.home_style | default: 'notes' }}">
  {% assign cats = site.data.categories %}
  {% assign cols = 5 %}
  {% for c in cats %}
    {% assign i = forloop.index0 %}
    {% assign open_row = i | modulo: cols %}
    {% if open_row == 0 %}
      <section class="shelf-row">
        <div class="shelf-title">Shelf {{ i | divided_by: cols | plus: 1 }}</div>
        <div class="tiles">
    {% endif %}

    <!-- Cover style card (always rendered; visibility controlled via CSS/JS) -->
    <a class="cover" href="{{ '/book/' | append: c.id | append: '/' | relative_url }}" data-id="{{ c.id }}">
      <div class="cover__strap"></div>
      <div class="cover__icon" aria-hidden="true"></div>
      <div class="cover__title">{{ c.label }}</div>
      {% if c.blurb %}<div class="cover__blurb">{{ c.blurb }}</div>{% endif %}
      <div class="cover__meta">Diary â€¢ {{ site.time | date: '%Y' }}</div>
    </a>

    <!-- Sticky note style card (always rendered; visibility controlled via CSS/JS) -->
    {% assign color = i | modulo: 4 %}
    <a class="note {% if color == 1 %}note--mint{% elsif color == 2 %}note--sky{% elsif color == 3 %}note--rose{% endif %}" href="{{ '/book/' | append: c.id | append: '/' | relative_url }}" style="--tilt: {{ -0.6 | plus: i | modulo: 3 | times: 0.6 }}deg">
      <div class="pin" aria-hidden="true"></div>
      <div class="dogear" aria-hidden="true"></div>
      <h3>{{ c.label }}</h3>
      <ul>
        {% assign posts = site.categories[c.id] | default: [] %}
        {% assign posts = posts | sort: "date" | reverse %}
        {% if posts and posts.size > 0 %}
          {% for p in posts limit:3 %}
            <li>{{ p.title }}</li>
          {% endfor %}
        {% else %}
            <li>Sample Page 1</li>
            <li>Sample Page 2</li>
            <li>Sample Page 3</li>
        {% endif %}
      </ul>
    </a>

    {% assign close_row = i | modulo: cols %}
    {% assign last_col = cols | minus: 1 %}
    {% if close_row == last_col or forloop.last %}
        </div> <!-- .tiles -->
      </section>
    {% endif %}
  {% endfor %}
</main>
